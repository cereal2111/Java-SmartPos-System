<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="io.smartpos.ui.report.ReportsController" spacing="10">

    <HBox alignment="CENTER_RIGHT">
        <Button text="ðŸ”„ Refresh Data" onAction="#refreshAll" styleClass="button-secondary" />
    </HBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">

        <!-- Analytics Dashboard -->
        <Tab text="ðŸ“ˆ Analytics">
            <VBox spacing="10" styleClass="content-area">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Range:" />
                    <DatePicker fx:id="chartStartDate" />
                    <DatePicker fx:id="chartEndDate" />
                    <Button text="Update Chart" onAction="#updateAnalyticsCharts"
                        styleClass="button-primary" />
                </HBox>
                <HBox spacing="10" VBox.vgrow="ALWAYS">
                    <LineChart fx:id="revenueChart" title="Daily Revenue" HBox.hgrow="ALWAYS">
                        <xAxis>
                            <CategoryAxis label="Date" side="BOTTOM" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Revenue ($)" side="LEFT" />
                        </yAxis>
                    </LineChart>
                    <javafx.scene.chart.BarChart fx:id="cashierChart" title="Sales by Cashier"
                        HBox.hgrow="ALWAYS">
                        <xAxis>
                            <CategoryAxis label="Cashier" side="BOTTOM" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Total Sales ($)" side="LEFT" />
                        </yAxis>
                    </javafx.scene.chart.BarChart>
                </HBox>
            </VBox>
        </Tab>

        <!-- Stock Report -->
        <Tab text="Current Stock">
            <VBox styleClass="content-area">
                <TableView fx:id="stockTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colProdId" text="ID" prefWidth="50" />
                        <TableColumn fx:id="colProdName" text="Product Name" prefWidth="200" />
                        <TableColumn fx:id="colProdQty" text="Quantity on Hand" prefWidth="100" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- Sales Report -->
        <Tab text="Sales History">
            <VBox spacing="10" styleClass="content-area">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="From:" />
                    <DatePicker fx:id="startDate" />
                    <Label text="To:" />
                    <DatePicker fx:id="endDate" />
                    <Button text="Run Report" onAction="#handleGenerateSales"
                        styleClass="button-primary" />
                    <Button text="ðŸ–¨ï¸ Print Report" onAction="#handlePrintReport"
                        styleClass="button-secondary" />
                </HBox>
                <TableView fx:id="salesTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colSaleId" text="Sale ID" prefWidth="80" />
                        <TableColumn fx:id="colSaleDate" text="Date" prefWidth="150" />
                        <TableColumn fx:id="colSaleTotal" text="Amount" prefWidth="100" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- Top Products -->
        <Tab text="Top Selling">
            <VBox styleClass="content-area">
                <TableView fx:id="topTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colTopName" text="Product Name" prefWidth="250" />
                        <TableColumn fx:id="colTopQty" text="Total Sold" prefWidth="100" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>

    </TabPane>
</VBox>